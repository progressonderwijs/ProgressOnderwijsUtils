version: build-{build}
branches:
  only:
  - master
image: Visual Studio 2019
environment:
  CONNECTION_STRING: Server=(local)\SQL2017;Database=master;User ID=sa;Password=Password12!
services: mssql2017
install:
- ps: .\install.ps1
build_script:
- cmd: dotnet build -c Release
- cmd: dotnet pack -c Release --include-symbols --include-source
test_script:
- cmd: dotnet test test/ProgressOnderwijsUtils.Tests -c Release
artifacts:
- path: '**\*.nupkg'
deploy:
- provider: NuGet
  api_key:
    secure: s5HC3zMcWzkFJyWpQ4qjUW1Hvjk1A0XPttAjOGinVKqI11EQQSQoxvAKeGZfEI1M
  skip_symbols: true
  on:
    branch: master
